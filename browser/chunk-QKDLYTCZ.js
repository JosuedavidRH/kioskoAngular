import{a as L,c as I,d as N,f as P,h as E,i as O,l as R,m as j,o as W}from"./chunk-QSHW7YEI.js";import{Aa as M,B as s,D as m,E as u,Ea as v,I as f,Ia as y,Ja as w,L as b,La as k,P as n,Q as r,R as h,W as x,X as C,ca as l,da as _,ga as g,ha as p,ia as d,wa as S}from"./chunk-WFFD74GT.js";function D(i,a){if(i&1&&(n(0,"p",9),l(1),r()),i&2){let e=C();s(),_(e.error)}}var z=class i{constructor(a,e){this.authService=a;this.router=e}username="";password="";error="";handleSubmit(a){a.preventDefault(),this.error="",this.authService.login(this.username,this.password).subscribe({next:e=>{e.success?(console.log("\u2705 Login exitoso:",e),localStorage.setItem("username",e.username||this.username),localStorage.setItem("apartmentNumber",e.apartmentNumber||""),console.log("localStorage despu\xE9s de login:",localStorage.getItem("username"),localStorage.getItem("apartmentNumber")),this.router.navigateByUrl("/home")):this.error=e.message||"Credenciales inv\xE1lidas"},error:e=>{console.error("\u274C Error en login:",e),this.error="Error de conexi\xF3n con el servidor"}})}static \u0275fac=function(e){return new(e||i)(m(W),m(y))};static \u0275cmp=u({type:i,selectors:[["app-login"]],decls:13,vars:3,consts:[[1,"login-background"],[1,"login-box"],["src","/k.jpg","alt","kiosko logo",1,"logo"],[3,"ngSubmit"],["type","text","placeholder","Usuario","name","username","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xF1a","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],["routerLink","/register",1,"register-btn"],["class","error",4,"ngIf"],[1,"error"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1),h(2,"img",2),n(3,"h2"),l(4,"Iniciar sesi\xF3n"),r(),n(5,"form",3),x("ngSubmit",function(o){return t.handleSubmit(o)}),n(6,"input",4),d("ngModelChange",function(o){return p(t.username,o)||(t.username=o),o}),r(),n(7,"input",5),d("ngModelChange",function(o){return p(t.password,o)||(t.password=o),o}),r(),n(8,"button",6),l(9,"Ingresar"),r()(),n(10,"button",7),l(11," Registrarse "),r(),f(12,D,2,1,"p",8),r()()),e&2&&(s(6),g("ngModel",t.username),s(),g("ngModel",t.password),s(5),b("ngIf",t.error))},dependencies:[M,S,k,w,v,j,O,L,I,N,R,E,P],styles:[".login-background[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100%;background-image:url(/fondo.jpg);background-size:cover;background-position:center;background-repeat:no-repeat}.login-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;background-color:#3b3f47d9;padding:30px;border-radius:10px;width:min(90%,300px);box-sizing:border-box}.logo[_ngcontent-%COMP%]{width:290px;height:130px;object-fit:cover;border-radius:110%;margin-bottom:20px}h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:clamp(1.2rem,4vw,1.8rem)}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}input[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #ccc;font-size:1rem}button[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:none;background-color:#fffc33;color:#000;font-weight:700;font-size:1rem;cursor:pointer}.register-btn[_ngcontent-%COMP%]{margin-top:10px;background:none;color:#fffc33;border:none;cursor:pointer;text-decoration:underline}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}"]})};export{z as LoginComponent};
