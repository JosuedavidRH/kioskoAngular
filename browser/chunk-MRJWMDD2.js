import{a as R,b as p,c as F,d as M,e as w,g as c,i as k,j as I,k as P,l as O,n as q,o as E}from"./chunk-QSHW7YEI.js";import{Aa as C,B as m,D as l,E as d,Ea as S,I as g,Ia as N,Ja as _,L as u,La as y,P as i,Q as n,R as f,W as b,X as x,ca as s,da as h,wa as v}from"./chunk-WFFD74GT.js";function z(a,t){if(a&1&&(i(0,"p",9),s(1),n()),a&2){let e=x();m(),h(e.error)}}var G=class a{constructor(t,e){this.authService=t;this.router=e;this.registerForm=new w({username:new c("",p.required),password:new c("",p.required),apartmentNumber:new c("",p.required)})}registerForm;error="";handleSubmit(){if(this.registerForm.invalid){this.error="Todos los campos son obligatorios";return}let{username:t,password:e,apartmentNumber:o}=this.registerForm.value;this.authService.register(t,e,o).subscribe({next:r=>{r.success?(localStorage.setItem("username",r.username||t),localStorage.setItem("apartmentNumber",r.apartmentNumber||o),console.log("\u2705 Registro exitoso:",localStorage.getItem("username"),localStorage.getItem("apartmentNumber")),this.router.navigateByUrl("/home")):this.error=r.message||"No se pudo registrar"},error:r=>{console.error("\u274C Error en registro:",r),this.error="Error de conexi\xF3n con el servidor"}})}static \u0275fac=function(e){return new(e||a)(l(E),l(N))};static \u0275cmp=d({type:a,selectors:[["app-register"]],decls:13,vars:2,consts:[[1,"register-background"],[1,"register-box"],[3,"ngSubmit","formGroup"],["type","text","placeholder","Usuario","formControlName","username","required",""],["type","password","placeholder","Contrase\xF1a","formControlName","password","required",""],["type","text","placeholder","N\xFAmero de apartamento","formControlName","apartmentNumber","required",""],["type","submit"],["routerLink","/login",1,"back-btn"],["class","error",4,"ngIf"],[1,"error"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Registrarse"),n(),i(4,"form",2),b("ngSubmit",function(){return o.handleSubmit()}),f(5,"input",3)(6,"input",4)(7,"input",5),i(8,"button",6),s(9,"Registrar"),n()(),i(10,"button",7),s(11,"Volver al Login"),n(),g(12,z,2,1,"p",8),n()()),e&2&&(m(4),u("formGroup",o.registerForm),m(8),u("ngIf",o.error))},dependencies:[C,v,q,k,R,F,M,O,I,P,y,_,S],styles:[".register-background[_ngcontent-%COMP%]{background-image:url(/fondo.jpg);background-size:cover;background-position:center;min-height:100vh;display:flex;justify-content:center;align-items:center}.register-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;background-color:#3b3f47d9;padding:30px;border-radius:10px;width:min(90%,300px);box-sizing:border-box;color:#fff}h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:clamp(1.2rem,4vw,1.8rem)}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}input[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #ccc;font-size:1rem}button[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:none;background-color:#fffc33;color:#000;font-weight:700;font-size:1rem;cursor:pointer}.back-btn[_ngcontent-%COMP%]{margin-top:10px;background:none;color:#fffc33;border:none;cursor:pointer;text-decoration:underline}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}"]})};export{G as RegisterComponent};
